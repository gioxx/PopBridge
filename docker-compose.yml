services:
  popbridge-pop3:
    build:
      context: .
      dockerfile: Dockerfile
    image: popbridge:latest
    container_name: popbridge-pop3
    restart: unless-stopped
    environment:
      SRC_HOST: ${SRC_HOST}
      SRC_PORT: ${SRC_PORT:-995}
      SRC_USER: ${SRC_USER}
      SRC_PASS: ${SRC_PASS}
      SRC_SSL: ${SRC_SSL:-true}
      SRC_STARTTLS: ${SRC_STARTTLS:-false}
      DST_SMTP_HOST: ${DST_SMTP_HOST}
      DST_SMTP_PORT: ${DST_SMTP_PORT:-587}
      DST_SMTP_USER: ${DST_SMTP_USER}
      DST_SMTP_PASS: ${DST_SMTP_PASS}
      DST_RCPT_TO: ${DST_RCPT_TO:-}
      DST_SMTP_STARTTLS: ${DST_SMTP_STARTTLS:-true}
      DST_SMTP_TLS_VERIFY: ${DST_SMTP_TLS_VERIFY:-true}
      DELETE_AFTER_DELIVERY: ${DELETE_AFTER_DELIVERY:-true}
      POLL_SECONDS: ${POLL_SECONDS:-120}
    volumes:
      - popbridge-pop3-state:/var/lib/forwarder
      - popbridge-pop3-logs:/var/log/forwarder

volumes:
  popbridge-pop3-state:
  popbridge-pop3-logs:
